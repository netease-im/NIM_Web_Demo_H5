{"version":3,"sources":["webpack:///./src/pages/SearchUser.vue?062e","webpack:///./src/pages/SearchUser.vue","webpack:///./src/pages/SearchUser.vue?d519"],"names":["mounted","$nextTick","searchType","parseInt","$route","params","$store","dispatch","data","searchText","searchList","errMsg","firstEntry","watch","searchResult","val","oldVal","length","computed","result","state","searchedUsers","map","item","nick","account","link","avatar","defaultUserIcon","methods","searchUser","$vux","alert","show","title","userUID","accounts"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA,oNAA6F;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iDAAiD,IAAI;AACpI,mCAAmC;;AAEnC;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;;;;;;;ACgBA;;;;;;kBAEe;AACbA,SADa,qBACF;AAAA;;AACT,SAAKC,SAAL,CAAe,YAAM;AACnB,YAAKC,UAAL,GAAkBC,SAAS,MAAKC,MAAL,CAAYC,MAAZ,CAAmBH,UAA5B,CAAlB;AACA,YAAKI,MAAL,CAAYC,QAAZ,CAAqB,mBAArB;AACD,KAHD;AAID,GANY;AAObC,MAPa,kBAOL;AACN,WAAO;AACLN,kBAAY,CADP;AAELO,kBAAY,EAFP;AAGLC,kBAAY,EAHP;AAILC,cAAQ,EAJH;;AAMLC,kBAAY;AANP,KAAP;AAQD,GAhBY;;AAiBbC,SAAO;AACLC,gBADK,wBACSC,GADT,EACcC,MADd,EACsB;AACzB,UAAI,KAAKd,UAAL,KAAoB,CAAxB,EAA2B;AACzB,aAAKS,MAAL,GAAc,YAAd;AACA;AACD;AACD,UAAKI,IAAIE,MAAJ,KAAe,CAAhB,IAAuB,CAAC,KAAKL,UAAjC,EAA8C;AAC5C,aAAKD,MAAL,GAAc,KAAd;AACD,OAFD,MAEO;AACL,aAAKA,MAAL,GAAc,EAAd;AACD;AACD,WAAKD,UAAL,GAAkBK,GAAlB;AACD;AAZI,GAjBM;AA+BbG,YAAU;AACRJ,gBADQ,0BACQ;AACd,UAAIK,SAAS,EAAb;AACA,UAAI,KAAKjB,UAAL,KAAoB,CAAxB,EAA2B;AACzB,eAAOiB,MAAP;AAED,OAHD,MAGO,IAAI,KAAKjB,UAAL,KAAoB,CAAxB,EAA2B;AAChCiB,iBAAS,KAAKb,MAAL,CAAYc,KAAZ,CAAkBC,aAAlB,CAAgCC,GAAhC,CAAoC,gBAAQ;AACnDC,eAAKC,IAAL,GAAYD,KAAKC,IAAL,IAAaD,KAAKE,OAA9B;AACAF,eAAKG,IAAL,kBAAyBH,KAAKE,OAA9B;AACAF,eAAKI,MAAL,GAAcJ,KAAKI,MAAL,IAAe,kBAAOC,eAApC;AACA,iBAAOL,IAAP;AACD,SALQ,CAAT;AAMD;AACD,aAAOJ,MAAP;AACD;AAfO,GA/BG;AAgDbU,WAAS;AACPC,cADO,wBACO;AACZ,WAAKlB,UAAL,GAAkB,KAAlB;AACA,UAAI,KAAKV,UAAL,KAAoB,CAAxB,EAA2B;AACzB,aAAK6B,IAAL,CAAUC,KAAV,CAAgBC,IAAhB,CAAqB;AACnBC,iBAAO;AADY,SAArB;AAGD,OAJD,MAIO,IAAI,KAAKhC,UAAL,KAAoB,CAAxB,EAA2B;AAChC,YAAI,KAAKO,UAAL,KAAoB,KAAKH,MAAL,CAAYc,KAAZ,CAAkBe,OAA1C,EAAmD;AACjD,eAAKzB,UAAL,GAAkB,EAAlB;AACA,eAAKC,MAAL,GAAc,YAAd;AACD,SAHD,MAGO;AACL,eAAKL,MAAL,CAAYC,QAAZ,CAAqB,aAArB,EAAoC;AAClC6B,sBAAU,CAAC,KAAK3B,UAAN;AADwB,WAApC;AAGD;AACF;AACF;AAjBM;AAhDI,C;;;;;;;;;;;;;AC7Cf,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"8.js","sourcesContent":["var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SearchUser.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?{\\\"id\\\":\\\"data-v-538b9a03\\\"}!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SearchUser.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\nComponent.options.__file = \"D:\\\\web\\\\node\\\\nim-web-demo-h5\\\\src\\\\pages\\\\SearchUser.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key !== \"__esModule\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] SearchUser.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-538b9a03\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-538b9a03\", Component.options)\n  }\n})()}\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/SearchUser.vue\n// module id = 289\n// module chunks = 8","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport config from '../configs'\r\n\r\nexport default {\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      this.searchType = parseInt(this.$route.params.searchType)\r\n      this.$store.dispatch('resetSearchResult')\r\n    })\r\n  },\r\n  data () {\r\n    return {\r\n      searchType: 0, // 用户 0 群 1\r\n      searchText: '',\r\n      searchList: [],\r\n      errMsg: '',\r\n      // 首次加载标志，因为mount和watch会有时序问题，首次加载不显示errMsg\r\n      firstEntry: true\r\n    }\r\n  },\r\n  watch: {\r\n    searchResult (val, oldVal) {\r\n      if (this.searchType === 1) {\r\n        this.errMsg = '群功能DEMO待开发'\r\n        return\r\n      }\r\n      if ((val.length === 0) && (!this.firstEntry)) {\r\n        this.errMsg = '无记录'\r\n      } else {\r\n        this.errMsg = ''\r\n      }\r\n      this.searchList = val\r\n    }\r\n  },\r\n  computed: {\r\n    searchResult () {\r\n      let result = []\r\n      if (this.searchType === 1) {\r\n        return result\r\n        // result = this.$store.state.searchedTeams\r\n      } else if (this.searchType === 0) {\r\n        result = this.$store.state.searchedUsers.map(item => {\r\n          item.nick = item.nick || item.account\r\n          item.link = `/namecard/${item.account}`\r\n          item.avatar = item.avatar || config.defaultUserIcon\r\n          return item\r\n        })\r\n      }\r\n      return result\r\n    }\r\n  },\r\n  methods: {\r\n    searchUser () {\r\n      this.firstEntry = false\r\n      if (this.searchType === 1) {\r\n        this.$vux.alert.show({\r\n          title: '群功能DEMO待开发'\r\n        })\r\n      } else if (this.searchType === 0) {\r\n        if (this.searchText === this.$store.state.userUID) {\r\n          this.searchList = []\r\n          this.errMsg = '别看了，就是你自己！'\r\n        } else {\r\n          this.$store.dispatch('searchUsers', {\r\n            accounts: [this.searchText]\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/SearchUser.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"g-inherit m-article p-search-user\"\n  }, [_c('x-header', {\n    staticClass: \"m-tab\",\n    attrs: {\n      \"left-options\": {\n        backText: ' '\n      }\n    }\n  }, [_c('button-tab', {\n    staticClass: \"m-tab-top\",\n    model: {\n      value: (_vm.searchType),\n      callback: function($$v) {\n        _vm.searchType = $$v\n      },\n      expression: \"searchType\"\n    }\n  }, [_c('button-tab-item', {\n    staticClass: \"u-tab-top\"\n  }, [_vm._v(\"搜索用户\")]), _vm._v(\" \"), _c('button-tab-item', {\n    staticClass: \"u-tab-top\"\n  }, [_vm._v(\"搜索群\")])], 1), _vm._v(\" \"), _c('a', {\n    slot: \"left\"\n  })], 1), _vm._v(\" \"), _c('group', {\n    staticClass: \"u-search\"\n  }, [_c('search', {\n    staticClass: \"u-ipt-default\",\n    attrs: {\n      \"type\": \"text\",\n      \"required\": false,\n      \"auto-fixed\": false,\n      \"placeholder\": \"请输入搜索内容\"\n    },\n    model: {\n      value: (_vm.searchText),\n      callback: function($$v) {\n        _vm.searchText = $$v\n      },\n      expression: \"searchText\"\n    }\n  }, [_c('span', {\n    slot: \"label\"\n  }, [_vm._v(\"搜索：\")])])], 1), _vm._v(\" \"), _c('div', [_c('x-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"action-type\": \"button\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.searchUser($event)\n      }\n    }\n  }, [_vm._v(\"搜索\")])], 1), _vm._v(\" \"), _c('group', {\n    staticClass: \"u-card u-list\"\n  }, _vm._l((_vm.searchList), function(user, index) {\n    return _c('cell', {\n      key: user.account,\n      staticClass: \"u-list-item\",\n      attrs: {\n        \"title\": user.nick,\n        \"inline-desc\": user.account,\n        \"userId\": index,\n        \"is-link\": \"\",\n        \"link\": user.link\n      }\n    }, [_c('img', {\n      staticClass: \"icon\",\n      attrs: {\n        \"width\": \"20\",\n        \"src\": user.avatar\n      },\n      slot: \"icon\"\n    })])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"u-card\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.errMsg))])])], 1)\n},staticRenderFns: []}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-538b9a03\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?{\"id\":\"data-v-538b9a03\"}!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/pages/SearchUser.vue\n// module id = 382\n// module chunks = 8"],"sourceRoot":""}